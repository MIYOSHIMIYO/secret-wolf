# テストワークフロー

## 日常的なテストフロー

### 1. 開発段階でのテスト

```bash
# 開発環境でのテスト
./scripts/start-parallel-testing.sh
# オプション1を選択してブラウザでテスト
```

**確認項目:**
- 新機能の基本動作
- UI/UXの確認
- エラーハンドリング
- パフォーマンス

### 2. 本番前のテスト

```bash
# 並行テスト環境の起動
./scripts/start-parallel-testing.sh
# オプション3を選択して両環境でテスト
```

**確認項目:**
- 本番環境での動作確認
- 実機でのユーザビリティ
- パフォーマンス比較
- データの分離確認

### 3. 問題発生時の切り分け

#### ステップ1: 環境の特定
```bash
# 開発環境でのみ発生
→ 開発環境固有の問題

# 本番環境でのみ発生
→ 本番環境固有の問題

# 両環境で発生
→ 設計・ロジックの問題
```

#### ステップ2: プラットフォームの特定
```bash
# ブラウザでのみ発生
→ ブラウザ固有の問題

# ネイティブアプリでのみ発生
→ Capacitor固有の問題

# 全プラットフォームで発生
→ 共通の問題
```

#### ステップ3: デバッグ情報の収集
```javascript
// ブラウザのコンソールで実行
import { debugHelper } from '@/utils/debugHelper';
debugHelper.exportDebugInfo();
```

## テストシナリオ

### 基本機能テスト

1. **ルーム作成・参加**
   - ルームID生成
   - 参加者数の制限
   - ニックネーム設定

2. **ゲーム進行**
   - フェーズ遷移
   - 役職配布
   - 投票機能

3. **チャット機能**
   - メッセージ送信
   - リアルタイム更新
   - エラーハンドリング

### クロスプラットフォームテスト

1. **同じルームでの異なる環境**
   - 本番環境（実機）+ 開発環境（ブラウザ）
   - データの分離確認
   - 通信の正常性

2. **UI/UXの一貫性**
   - デザインの統一
   - 操作感の統一
   - レスポンシブ対応

### パフォーマンステスト

1. **接続速度**
   - WebSocket接続時間
   - メッセージ送受信速度
   - 再接続時間

2. **メモリ使用量**
   - 長時間使用でのメモリリーク
   - 大量データ処理
   - ガベージコレクション

## 問題報告テンプレート

### バグレポート

```
## 問題の概要
[問題の簡潔な説明]

## 環境情報
- テスト環境: [本番/開発]
- プラットフォーム: [iOS/Android/ブラウザ]
- ブラウザ: [Chrome/Safari/Firefox等]
- バージョン: [アプリバージョン]

## 再現手順
1. [手順1]
2. [手順2]
3. [手順3]

## 期待される動作
[期待される動作の説明]

## 実際の動作
[実際に起こった動作の説明]

## デバッグ情報
[ログファイルやスクリーンショット等]

## 追加情報
[その他の関連情報]
```

### パフォーマンスレポート

```
## パフォーマンス問題
[問題の概要]

## 測定環境
- 環境: [本番/開発]
- プラットフォーム: [iOS/Android/ブラウザ]
- デバイス: [デバイス情報]

## 測定結果
- 接続時間: [時間]
- メッセージ送信時間: [時間]
- メモリ使用量: [使用量]

## 比較対象
[比較対象の環境や条件]

## 改善提案
[改善案や最適化案]
```

## 継続的改善

### 週次レビュー
- テスト結果の分析
- 問題の傾向分析
- 改善点の特定

### 月次レビュー
- テストプロセスの見直し
- ツールの改善
- ドキュメントの更新

### 四半期レビュー
- テスト戦略の見直し
- 新技術の導入検討
- チーム体制の見直し
