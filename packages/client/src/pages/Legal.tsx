/**
 * 法務文書ページ
 * 特定商取引法、利用規約、プライバシーポリシー
 */

import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import Screen from '@/components/Screen';
import HeaderBar from '@/components/HeaderBar';
import Panel from '@/components/Panel';
import { SecondaryBtn } from '@/components/Buttons';

type LegalDocument = 'terms' | 'privacy';

export default function Legal() {
  const navigate = useNavigate();
  const [activeDocument, setActiveDocument] = useState<LegalDocument>('terms');

  const documents = {
    terms: {
      title: '利用規約',
      content: `
秘密人狼 利用規約

第1条（適用）
本規約は、秘密人狼（以下「本サービス」）の利用条件を定めるものです。本サービスは、ブラウザ上で動作するオンライン人狼ゲームです。

第2条（利用開始）
1. 本サービスは、ブラウザ上で直接利用可能なサービスです。特別な登録手続きは不要です。
2. 本サービスを利用することにより、本規約に同意したものとみなします。
3. 当社は、以下の事由があると判断した場合、本サービスの利用を制限することがあります。
   (1) 本規約に違反した場合
   (2) 不正な行為を行った場合
   (3) その他、当社が不適切と判断した場合

第3条（ニックネームの管理）
1. ユーザーは、ゲーム内で使用するニックネームを適切に設定するものとします。
2. ニックネームは、他のユーザーに不快感を与える内容や、個人情報を含む内容は使用できません。

第4条（禁止事項）
ユーザーは、本サービスの利用にあたり、以下の行為をしてはなりません。
(1) 法令または公序良俗に違反する行為
(2) 犯罪行為に関連する行為
(3) 本サービスの内容等、本サービスに含まれる著作権、商標権ほか知的財産権を侵害する行為
(4) 当社、ほかのユーザー、またはその他第三者のサーバーまたはネットワークの機能を破壊したり、妨害したりする行為
(5) 本サービスによって得られた情報を商業的に利用する行為
(6) 当社のサービスの運営を妨害するおそれのある行為
(7) 不正アクセスをし、またはこれを試みる行為
(8) 他のユーザーに関する個人情報等を収集または蓄積する行為
(9) 不正な目的を持って本サービスを利用する行為
(10) 本サービスの他のユーザーまたはその他の第三者に不利益、損害、不快感を与える行為
(11) 他のユーザーに成りすます行為
(12) 当社が許諾しない本サービス上での宣伝、広告、勧誘、または営業行為
(13) 面識のない異性との出会いを目的とした行為
(14) 当社のサービスに関連して、反社会的勢力に対して直接または間接に利益を供与する行為
(15) その他、当社が不適切と判断する行為

第5条（本サービスの提供の停止等）
1. 当社は、以下のいずれかの事由があると判断した場合、ユーザーに事前に通知することなく本サービスの全部または一部の提供を停止または中断することができるものとします。
   (1) 本サービスにかかるコンピュータシステムの保守点検または更新を行う場合
   (2) 地震、落雷、火災、停電または天災などの不可抗力により、本サービスの提供が困難となった場合
   (3) コンピュータまたは通信回線等が事故により停止した場合
   (4) その他、当社が本サービスの提供が困難と判断した場合

第6条（利用制限）
1. 当社は、ユーザーが以下のいずれかに該当する場合には、事前の通知なく、ユーザーに対して、本サービスの全部もしくは一部の利用を制限することができるものとします。
   (1) 本規約のいずれかの条項に違反した場合
   (2) 不正な行為を行った場合
   (3) その他、当社が本サービスの利用を適当でないと判断した場合

第7条（保証の否認および免責事項）
1. 当社は、本サービスに事実上または法律上の瑕疵（安全性、信頼性、正確性、完全性、有効性、特定の目的への適合性、セキュリティなどに関する欠陥、エラーやバグ、権利侵害などを含みます。）がないことを明示的にも黙示的にも保証しておりません。
2. 当社は、本サービスに起因してユーザーに生じたあらゆる損害について、当社の故意又は重過失による場合を除き、一切の責任を負いません。

第8条（サービス内容の変更等）
当社は、ユーザーに通知することなく、本サービスの内容を変更しまたは本サービスの提供を中止することができるものとし、これによってユーザーに生じた損害について一切の責任を負いません。

第9条（利用規約の変更）
当社は、必要と判断した場合には、ユーザーに通知することなくいつでも本規約を変更することができるものとします。

第10条（個人情報の取扱い）
当社は、本サービスの利用によって取得する個人情報については、当社「プライバシーポリシー」に従い適切に取り扱うものとします。

第11条（通知または連絡）
ユーザーと当社との間の通知または連絡は、当社の定める方法によって行うものとします。

第12条（権利義務の譲渡の禁止）
ユーザーは、当社の書面による事前の承諾なく、利用契約上の地位または本規約に基づく権利もしくは義務を第三者に譲渡し、または担保に供することはできません。

第13条（準拠法・裁判管轄）
1. 本規約の解釈にあたっては、日本法を準拠法とします。
2. 本サービスに関して紛争が生じた場合には、当社の本店所在地を管轄する裁判所を専属的合意管轄とします。

制定日：2024年12月1日
      `
    },
    privacy: {
      title: 'プライバシーポリシー',
      content: `
秘密人狼 プライバシーポリシー

1. 基本方針
秘密人狼（以下「本サービス」）は、ユーザーの個人情報の保護に関する法令等を遵守し、適切な取扱いを行います。本サービスは、ブラウザ上で動作するオンライン人狼ゲームです。

2. 収集する情報
本サービスでは、以下の情報を収集する場合があります。
(1) ユーザーが入力した情報（ニックネーム、ルームID等）
(2) ブラウザ情報（ユーザーエージェント、言語設定等）
(3) ゲームプレイ情報（ゲーム結果、プレイ時間等）

3. 情報の利用目的
収集した情報は、以下の目的で利用します。
(1) 本サービスの提供・運営
(2) ユーザーサポート
(3) サービス改善・開発
(4) 不正利用の防止
(5) 法的義務の履行

4. 情報の保存期間
(1) ゲームデータ：ゲーム終了後24時間以内に削除
(2) チャットデータ：ゲーム終了後24時間以内に削除
(3) アクセスログ：30日間保存

5. 情報の第三者提供
以下の場合を除き、個人情報を第三者に提供しません。
(1) ユーザーの同意がある場合
(2) 法令に基づく場合
(3) 人の生命、身体または財産の保護のために必要がある場合

6. 情報の安全管理
個人情報の漏洩、滅失または毀損の防止その他の安全管理のために必要かつ適切な措置を講じます。

7. クッキー等の利用
本サービスでは、以下の技術を使用する場合があります。
(1) クッキー：セッション管理、設定保存
(2) ローカルストレージ：ゲーム設定の保存
(3) Service Worker：オフライン機能、キャッシュ管理

8. 未成年者の個人情報
未成年者の個人情報については、親権者の同意を得て収集・利用します。

9. 個人情報の開示・訂正・削除
ユーザーは、当社に対して個人情報の開示、訂正、削除を求めることができます。

10. プライバシーポリシーの変更
本ポリシーは、法令の変更等に応じて必要に応じて変更することがあります。

制定日：2024年12月1日
      `
    }
  };

  const currentDocument = documents[activeDocument];

  return (
    <Screen>
      <HeaderBar title="法務文書" onBack={() => navigate('/menu')} />
      
      <div className="flex-1 flex flex-col">
        {/* 文書選択タブ */}
        <div className="p-4 border-b border-gray-600">
          <div className="flex flex-wrap gap-2">
            {Object.entries(documents).map(([key, doc]) => (
              <button
                key={key}
                onClick={() => setActiveDocument(key as LegalDocument)}
                className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
                  activeDocument === key
                    ? 'bg-blue-500 text-white'
                    : 'bg-gray-700 text-gray-300 hover:bg-gray-600'
                }`}
              >
                {doc.title}
              </button>
            ))}
          </div>
        </div>

        {/* 文書内容 */}
        <div className="flex-1 p-4 overflow-y-auto">
          <Panel>
            <div className="space-y-4">
              <h2 className="text-2xl font-bold text-white">{currentDocument.title}</h2>
              <div className="prose prose-invert max-w-none">
                <pre className="whitespace-pre-wrap text-sm text-gray-300 leading-relaxed">
                  {currentDocument.content}
                </pre>
              </div>
            </div>
          </Panel>
        </div>

        {/* フッター */}
        <div className="p-4 border-t border-gray-600">
          <SecondaryBtn
            onClick={() => navigate('/menu')}
            className="w-full"
          >
            メニューに戻る
          </SecondaryBtn>
        </div>
      </div>
    </Screen>
  );
}
